\chapter{棘手情况的处理}

在上一节，我们遗留了一个情况没有处理，也就是当缺陷坐标为$(1, t_1 \times k + 2)$和$(1, t_2 \times k + 1), t_1 < t_2$时，该情况我们称为棘手情况，这一节我们将证明在此情况下，棋盘不可被平铺。
\section{棘手情况处理的前置}
我们先考虑长度为x的位于边界上的待铺一行，骨牌大小为$1 \times k$，则x可以分为若干个k和若干个1的相加，如$x = k + 1 + k$，即等价于这一行按顺序为1个横着的骨牌，1个竖着的骨牌，1个横着的骨牌的铺设。记$n * 1$为n根竖着的并排放置的骨牌，$m * k$为m根横着并排放置的骨牌，$+$为两种不同的铺设的接合。
\begin{theorem}
    对于一个棋盘的边界上的一行长度为x，骨牌的的大小为$1 \times k$，则x一定可以分解为$x = m * k + t * 1 + n * k, t < k$

    \label{basic-theorem-4}
\end{theorem}
\begin{proof}

    对于一个大小为$k \times k$的区域，由k个竖着的骨牌平铺和k个横着的骨牌平铺是相等的，而处于边界上的一行，铺设k个竖着的骨牌和一个横着的骨牌表现都可以把他铺满，因此我们能得到第一条转化公式

    \begin{equation}
        x =... + k * 1 + ... \rightarrow x = ... + 1 * k + ...
    \end{equation}

    当长度$x < k$时，此时$m = n = 0$，有$x = x * 1$。

    当长度$x = k$时，一个横着的骨牌可以平铺一整行，有$x = 1 * k$，假若有竖着的骨牌，则有等式$x = 1 + (x - 1) = 1 + (x - 1) * 1 = x * 1 = 1 * x = 1 * k$。

    此时考虑边界上的某个横着的骨牌，倘若他的左右都有一根竖着的骨牌，那么考虑第二行的这个区域，满足前述的长度为$x = k$的情况，因此等价于铺设一根横着的骨牌，重复考虑k次，则相当于连续铺设了k根横着的骨排，也就等价于铺设了k根竖着的骨牌，因此我们得到第二条转化公式
    \begin{equation}
        x = ... + 1 + k + 1 = ... + 1 + k * 1 + 1 + ...= ... + (k + 2) * 1 + ...
    \end{equation}

    假设对于长度小于$x-1$的行都成立时，我们考虑长度为$x$的行，有
    $$
        \begin{aligned}
            x & = \sum_{i=0}^{a} (m_i * k + n_i * 1) + m_{a+1} * k                                \\
              & = m_1 * k + n_1 * 1 + \sum_{i=1}^{a} (m_i * k + n_i * 1)+ m_{a+1} * k             \\
              & = m_1 * k + n_1 * 1 + \sum_{i=1}^{a} ((m_i \times k) * 1 + n_i * 1) + m_{a+1} * k \\
              & = m_1 * k + n_1 * 1 + \sum_{i=1}^{a} ((m_i \times k) + n_i) * 1 + m_{a+1} * k     \\
              & = m_1 * k + (x - m_1 \times k - m_{a+1} \times k) * 1 + m_{a+1} * k               \\
              & = m_1 * k + n_1 * k + t * 1 + n_2 * k + m_{a+1} * k                               \\
              & = m * k + t * 1 + n * k.
        \end{aligned}
    $$

    故$\forall x, \exists m, t, n, s.t. x = m * k + t * 1 + n * k, m, t < k$
\end{proof}

\section{棘手情况的正式处理}
不妨假设棘手情况的缺陷坐标的$(i_1, j_1)$和$(i_2, j_2)$满足$i_1 = i_2 = 1, j_1 = t_1 \times k + 2, j_2 = t_2 \times k + 1$，且长度$x = tk + 2$，棋盘的宽度为$y = t^{'}k + 1$ 以便我们后续讨论。

考虑棘手情况的第一行，两个缺陷格子自然把第一行分作三个小行，分别是第1到第$j_1 - 1$个方格，第$j_1 + 1$ 到$j_2 - 1$, $j_2 + 1$到$x$的方格，由\ref*{basic-theorem-4}，我们将得到\ref*{first-difficult-sep}
$$
    \left\{
    \begin{aligned}
        j_1 - 1       & = (t_1 - u) * k  + 1 * 1 + u * k                 \\
        j_2 - j_1 - 3 & = (t_2 - t_1 - 1 - u) * k  + (k - 2) * 1 + u * k \\
        x - j_2       & = (t - t_2 - u) * k  + 1 * 1 + u * k
        \label{first-difficult-sep}
    \end{aligned}
    \right.
$$

因此第一行可以分解为

$x = (t_1 - u) * k  + 1 * 1 + u * k + r +  (t_2 - t_1 - 1 - u) * k  + (k - 2) * 1 + u * k + r + (t - t_2 - u) * k  + 1 * 1 + u * k$

由于对于边界来说，我们可以看做是一条无限长的竖着铺的骨牌，因此我们可以再次进行转化化简式子
$$
    \begin{aligned}
        x & = (t_1 - u) * k  + 1 * 1 + u * k + r + ...                  \\
          & + r + (t - t_2 - u) * k  + 1 * 1 + u * k                    \\
          & = -1 * 1 + 1 * 1 + (t_1 - u) * k  + 1 * 1 + u * k + r + ... \\
          & + r + (t - t_2 - u) * k  + 1 * 1 + u * k + 1 * 1 - 1 * 1    \\
          & = -1 * 1 + ((t_1 - u) \times k  + 2)  * 1 + u * k + r + ... \\
          & + r + (t - t_2 - u) * k  +  (u \times k + 2) * 1 - 1 * 1    \\
          & = -1 * 1 + 2 * 1 + (t_1 - u) * k  + u * k + r ...           \\
          & r + (t - t_2 - u) * k  +  u * k + 2 * 1 - 1 * 1             \\
          & = 1 * 1 +  t_1 * k + r ... + r + (t - t_2) * k + 1 * 1
    \end{aligned}
$$

现在我们考虑第二行，对于第一行的所有竖着铺的骨牌，他在第二行中不需要被铺设，可以看做是第二行的缺陷，因此我们等价于考虑两条长度为$(t_2 - 1 - u) \times k + 1$和$(t - t_2 + u) \times k + 1$的需要平铺的行，由\ref*{basic-theorem-4}，有\ref*{second-difficult-sep}

$$
    \left\{
    \begin{aligned}
        (t_2- 1 - u) \times k + 1  & = (t_2- 1 - u - u^{'}) * k + 1* 1 +  u^{'} * k)    \\
        (t - t_2 + u) \times k + 1 & = (t - t_2 + u - u^{''}) * k + 1 * 1 +  u^{''} * k
        \label{second-difficult-sep}
    \end{aligned}
    \right.
$$

因此第二行可以分解为

$x =  1 * r +  (t_2- 1 - u - u^{'}) * k + 1 * 1 +  u^{'} * k  + (k - 2) * r + (t - t_2 + u - u^{''}) * k + 1 * 1 +  u^{''} * k + 1 * 1$

现在我们考虑第三行，由于$k \ge 3$，因此第一行和第二行所竖着铺的骨牌在第三行仍然不需要铺设，仍然是缺陷，因此我们等价于考虑$(t_2- 1 - u - u^{'}) \times k$和$(t - t_2 + u - u^{''}) \times k$的两行需要平铺的行，\ref*{basic-theorem-4}，有\ref*{last-difficult-sep}

$$
    \left\{
    \begin{aligned}
        (t_2- 1 - u - u^{'}) \times k   & = (t_2- 1 - u - u^{'}) * k   \\
        (t - t_2 + u - u^{''}) \times k & = (t - t_2 + u - u^{''}) * k
        \label{last-difficult-sep}
    \end{aligned}
    \right.
$$

故第三行已经不需要铺设任何竖着的骨牌，对于第3行到第k行的所有行，我们全部像可以第三行一样铺设和考虑。

此时前k行已经全部铺设完毕，最后我们考虑第$k + 1$行的缺陷所在位置，只有第2行的竖着的骨牌铺设会影响到第k+1行，第二行的竖着的骨牌所在位置分别为$2 + (t_2- 1 - u - u^{'}) \times k$和$x - u^{''} \times k - 2$，故恰好对应着$(t^{'}k + 1 - k) \times (tk + 2)$，的某种棘手情况，如此反复归纳，我们可以得到，所有棘手情况都和$1 \times (kb + 2)$的某种棘手情况相对应，而只有一行的棘手情况中，我们是无法平铺的，因此也就是所有的棘手情况，我们都无法平铺，得证。

\clearpage